<script type="text/javascript">
  RED.nodes.registerType("inovelli-scene-manager", {
    category: "inovelli",
    color: "#B68181",
    defaults: {
      name: { value: "" },
      nodeid: { value: "" },
      entityid: { value: "" },
      zwave: { value: "zwave_js" },
      switchtype: { value: 8 },
      outputs: { value: 1 },
    },
    inputs: 1,
    icon: "light.svg",
    align: "right",
    label: function () {
      return this.name || "inovelli-scene-manager";
    },
    oneditprepare: function () {
      $("#node-input-zwave").change(function () {
        var zwave = $("#node-input-zwave").val();
        switch (zwave) {
          case "zwave_js":
            $(".nodeid-input").hide();
            $(".entityid-input").show();
            break;
          case "ozw":
            $(".nodeid-input").show();
            $(".entityid-input").hide();
            break;
          case "zwave":
            $(".nodeid-input").show();
            $(".entityid-input").hide();
        }
      });
    },
  });
</script>

<script type="text/x-red" data-template-name="inovelli-scene-manager">
  <div class="form-row">
      <label for="node-input-name"><i class="icon-tag"></i>Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-zwave"><i class="icon-tag"></i>Z-Wave Integration</label>
    <select name="node-input-zwave" id="node-input-zwave">
        <option value="zwave_js">Z-Wave JS</option>
        <option value="ozw">OpenZWave (1.6)</option>
        <option value="zwave">Z-Wave (Deprecated)</option>
    </select>
  </div>
  <div class="form-row nodeid-input">
    <label for="node-input-nodeid"><i class="icon-tag"></i>Node Id</label>
    <input type="number" id="node-input-nodeid" min="1">
  </div>
  <div class="form-row entityid-input">
    <label for="node-input-entityid"><i class="icon-tag"></i>Entity Id</label>
    <input type="text" id="node-input-entityid">
  </div>
  <div class="form-row">
    <label for="node-input-switchtype"><i class="icon-tag"></i>Switch Type</label>
    <select name="node-input-switchtype" id="node-input-switchtype">
        <option value="1">Switch (LZW30-SN)</option>
        <option value="2">Dimmer (LZW31-SN)</option>
        <option value="3">Fan/Light Dimmer (LZW36)</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-outputs"><i class="icon-tag"></i>Button Clicks</label>
    <select name="node-input-outputs" id="node-input-outputs">
        <option value="0">None (Instant On)</option>
        <option value="1">1 Click</option>
        <option value="2">2 Clicks</option>
        <option value="3">3 Clicks</option>
        <option value="4">4 Clicks</option>
        <option value="5">5 Clicks</option>
        <option value="6">6 Clicks</option>
    </select>
  </div>
</script>

<script type="text/x-red" data-help-name="inovelli-scene-manager">
  <p>This node will decipher button clicks on an Inovelli Red Series switch allowing for easy scene control in Home Assistant.</p>
  <dl class="message-properties">
      <dt>Z-Wave Integration<span class="property-type">string</span></dt>
      <dd>Your Z-Wave integration used in Home Assistant (zwave_js, ozw, or zwave)</dd>

      <dt>Entity Id<span class="property-type">string</span></dt>
      <dd>(For Z-Wave JS) Entity (or a comma-delimited list of entity ids) to set the configuration parameter on</dd>

      <dt>Node Id<span class="property-type">number</span></dt>
      <dd>(For OpenZWave or Z-Wave) Node id of the Inovelli switch you are trying to configure</dd>

      <dt>Switch Type<span class="property-type">number|string</span></dt>
      <dd>Determines which Inovelli switch is being used. (LZW30-SN, LZW31-SN, LZW36 (fan and/or light))</dd>

      <dt>Button Clicks<span class="property-type">number|string</span></dt>
      <dd>Sets the outputs of this node based on your switch type and how many scenes you want controlled for each button</dd>
  </dl>
</script>
